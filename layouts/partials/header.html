<header class="sticky top-0 z-20 h-16 px-4 text-white bg-gradient-to-r from-accent-light to-blue-light-500 dark:from-accent-dark dark:to-blue-dark-100">
  <div class="mx-auto flex h-full max-w-[1400px] items-center justify-between">
    <div class="flex h-full items-center gap-8 md:gap-2">
      {{ if not .IsHome }}
      <button x-data @click="() => {
      $store.showSidebar = ! $store.showSidebar;
      const sidebar = document.querySelector('#sidebar');
      if ($store.showSidebar) {
        sidebar.classList.replace('md:hidden', 'md:block');
      } else {
        sidebar.classList.replace('md:block', 'md:hidden');
      }
      }" class="icon-svg hidden px-4 md:block" aria-label="Menu">
        {{ partial "icon" "menu" }}
      </button>
      {{ end }}
      <div>
        {{/* main logo */}}
        <a title="Docker Docs home page" href="{{ site.BaseURL }}">
          <div>
            {{- (resources.Get "images/docs-logo-white-full.svg").Content | safe.HTML -}}
          </div>
        </a>
      </div>
      {{ partial "top-nav.html" . }}
    </div>
    <div class="flex items-center gap-6">
      <div
        x-data="{ open: false }"
        @keyup.escape.window="open = false"
        >
        <!-- search button -->
        <button @click="
          open = true;
          await $nextTick();
          focusSearch()
          ">
          <span class="icon-svg">{{ partial "icon" "search"}}</span>
        </button>
        <!-- search modal -->
        <div
          class="flex justify-center w-lvw z-10 fixed left-0 top-0 my-12"
          role="dialog"
          tabindex="-1"
          x-show="open"
          x-cloak
          x-transition>
          <div class="w-[840px] md:w-full md:m-4"
            @click.away="open = false"
            >
            <div id="pagefind"></div>
          </div>
        </div>
        <!-- search modal backdrop -->
        <div
          class="w-full h-full bg-background-dark/70 top-0 left-0 fixed"
          x-show="open" x-cloak></div>
        <!-- register pagefind handler on modal -->
        <script>
          window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({
              element: "#pagefind",
              showSubResults: true,
              showImages: false,
            });
          });

          function focusSearch(open) {
            const input = document.querySelector(".pagefind-ui__search-input")
            input.focus()
          }
        </script>
      </div>
      <button aria-label="Theme switch" id="theme-switch" class="svg-icon"
        x-data="{ theme: localStorage.getItem('theme-preference') }" x-init="$watch('theme', value => {
        localStorage.setItem('theme-preference', value);
        document.firstElementChild.className = value;
      })" @click="theme = (theme === 'dark' ? 'light' : 'dark')">
        <span class="icon-svg dark:hidden">{{ partial "icon" "light_mode"}}</span>
        <span class="icon-svg hidden dark:block">{{ partial "icon" "dark_mode"}}</span>
      </button>
    </div>
  </div>

</header>
